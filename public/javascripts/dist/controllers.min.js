angular.module("appModule").controller("mainCtrl",["$scope","$timeout","flash","$http","$cookies","translateService","genericConfig","$location","Flash",function(a,b,c,d,e,f,g,h,i){a.flash=c,a.showMessageSuccess=function(a){"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a));var b="<ul>";a.forEach(function(a){b+="<li>"+a+"</li>"}),b+="</ul>",i.create("success","<strong> "+f.translate("generic.Done")+"! </strong>"+b,g.timeSuccess)},a.showMessageError=function(a){"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a));var b="<ul>";a.forEach(function(a){b+="<li>"+a+"</li>"}),b+="</ul>",i.create("danger","<strong> "+f.translate("generic.Oops")+"! </strong>"+b,g.timeError)},a.setLanguage=function(b){d({method:"GET",url:"/language/"+b}).then(function(c){a.language=b,location.reload()})},c.getMessages()&&(c.isInfo?a.showMessageSuccess(c.getMessages()):a.showMessageError(c.getMessages())),a.confirmPopup=function(a,b){bootbox.confirm({size:"small",title:f.translate("generic.Attention")+"!",message:a,buttons:{confirm:{label:f.translate("generic.Confirm")},cancel:{label:f.translate("generic.Cancel")}},callback:b})},a.trackerPage=function(){var b=[],c=5,d=a.currentPage-(c-1)/2,e=a.currentPage+(c-1)/2;a.currentPage-1>(c-1)/2&&b.push("..."),0>=d&&(e=e+1-d,d=1),e>a.pageCount&&(d-=e-a.pageCount,e=a.pageCount,0>=d&&(d=1));for(var f=d;e>=f;)b.push(parseInt(f,10)),f++;return a.currentPage+c/2<=a.pageCount&&b.push("..."),b},a.setCurrencyPage=function(a){h.search("page",a)},a.language=e.get("myFavoriteLanguage")}]),angular.module("appModule").controller("occupationAddCtrl",["$scope","OccupationFactory","$controller","$location","flash","translateService",function(a,b,c,d,e,f){angular.extend(this,c("mainCtrl",{$scope:a})),a.saveOccupation=function(c){b.save(c,function(){e.setMessagesSuccess(f.translate("generic.saved")),d.path("/occupations")},function(b){a.showMessageError(b.data)})},a.labelOperation=f.translate("generic.New",[f.translate("occupations.Occupation")])}]),angular.module("appModule").controller("occupationDetailCtrl",["$scope","occupation",function(a,b){a.occupation=b}]),angular.module("appModule").controller("occupationEditCtrl",["$scope","OccupationFactory","$location","occupation","$controller","flash","$cookies","translateService",function(a,b,c,d,e,f,g,h){angular.extend(this,e("mainCtrl",{$scope:a,flash:f})),a.occupation=d,a.saveOccupation=function(d){b.update(d,function(){f.setMessagesSuccess(h.translate("generic.saved")),c.path("/occupations")},function(b){a.showMessageError(b.data)})},a.labelOperation=h.translate("generic.Edit",[h.translate("occupations.Occupation")])}]),angular.module("appModule").controller("occupationListCtrl",["$scope","OccupationFactory","$controller","translateService","$routeParams",function(a,b,c,d,e){angular.extend(this,c("mainCtrl",{$scope:a})),a.listOccupation=function(c){b.query({page:c},function(b){a.listPaginated=b.list,a.hasNextPage=b.hasNextPage,a.pageCount=b.pageCount,a.currentPage=b.currentPage},function(b){a.showMessageError(b.data)})},a.removeOccupation=function(c){a.confirmPopup(d.translate("generic.deleteConfirmation",[c.name]),function(f){f&&b.remove({id:c.id},function(){a.listOccupation(e.page),a.showMessageSuccess(d.translate("generic.deleted"))},function(b){a.showMessageError(b.data)})})},a.listOccupation(e.page)}]),angular.module("appModule").controller("projectAddCtrl",["$scope","ProjectFactory","$controller","$location","flash","translateService","participants",function(a,b,c,d,e,f,g){angular.extend(this,c("mainCtrl",{$scope:a})),a.participants=g,a.saveProject=function(c){b.save(c,function(){e.setMessagesSuccess(f.translate("generic.saved")),d.path("/projects")},function(b){a.showMessageError(b.data)})},a.labelOperation=f.translate("generic.New",[f.translate("projects.Project")])}]),angular.module("appModule").controller("projectDetailCtrl",["$scope","project",function(a,b){a.project=b}]),angular.module("appModule").controller("projectEditCtrl",["$scope","ProjectFactory","$location","participants","$controller","flash","$cookies","translateService","project",function(a,b,c,d,e,f,g,h,i){angular.extend(this,e("mainCtrl",{$scope:a,flash:f})),a.project=i,a.participants=d,a.saveProject=function(d){b.update(d,function(){f.setMessagesSuccess(h.translate("generic.saved")),c.path("/projects")},function(b){a.showMessageError(b.data)})},a.labelOperation=h.translate("generic.Edit",[h.translate("projects.Project")])}]),angular.module("appModule").controller("projectListCtrl",["$scope","ProjectFactory","$controller","translateService","$routeParams",function(a,b,c,d,e){angular.extend(this,c("mainCtrl",{$scope:a})),a.listProject=function(c){b.query({page:c},function(b){a.listPaginated=b.list,a.hasNextPage=b.hasNextPage,a.pageCount=b.pageCount,a.currentPage=b.currentPage},function(b){a.showMessageError(b.data)})},a.removeProject=function(c){a.confirmPopup(d.translate("generic.deleteConfirmation",[c.name]),function(f){f&&b.remove({id:c.id},function(){a.listProject(e.page),a.showMessageSuccess(d.translate("generic.deleted"))},function(b){a.showMessageError(b.data)})})},a.listProject(e.page)}]),angular.module("appModule").controller("userAddCtrl",["$scope","UserFactory","$controller","$location","flash","translateService","occupations",function(a,b,c,d,e,f,g){angular.extend(this,c("mainCtrl",{$scope:a})),a.occupations=g,a.saveUser=function(c){b.save(c,function(){e.setMessagesSuccess(f.translate("generic.saved")),d.path("/users")},function(b){a.showMessageError(b.data)})},a.labelOperation=f.translate("generic.New",[f.translate("users.User")])}]),angular.module("appModule").controller("userDetailCtrl",["$scope","user",function(a,b){a.user=b}]),angular.module("appModule").controller("userEditCtrl",["$scope","UserFactory","$location","user","occupations","$controller","flash","$cookies","translateService",function(a,b,c,d,e,f,g,h,i){angular.extend(this,f("mainCtrl",{$scope:a,flash:g})),a.user=d,a.occupations=e,a.saveUser=function(d){b.update(d,function(){g.setMessagesSuccess(i.translate("generic.saved")),c.path("/users")},function(b){a.showMessageError(b.data)})},a.labelOperation=i.translate("generic.Edit",[i.translate("users.User")])}]),angular.module("appModule").controller("userListCtrl",["$scope","UserFactory","$controller","translateService","$routeParams",function(a,b,c,d,e){angular.extend(this,c("mainCtrl",{$scope:a})),a.listUser=function(c){b.query({page:c},function(b){a.listPaginated=b.list,a.hasNextPage=b.hasNextPage,a.pageCount=b.pageCount,a.currentPage=b.currentPage},function(b){a.showMessageError(b.data)})},a.removeUser=function(c){a.confirmPopup(d.translate("generic.deleteConfirmation",[c.name]),function(f){f&&b.remove({id:c.id},function(){a.listUser(e.page),a.showMessageSuccess(d.translate("generic.deleted"))},function(b){a.showMessageError(b.data)})})},a.listUser(e.page)}]);